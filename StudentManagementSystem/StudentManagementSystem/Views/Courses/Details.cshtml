@model IEnumerable<Course>

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Manage Courses</h2>

    <a asp-action="Create" class="btn btn-success">
        <i class="bi bi-plus-lg"></i> Add Course
    </a>
</div>

<div class="table-responsive">
    <table class="table table-bordered table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>Name</th>
                <th>Department</th>
                <th>Duration</th>
                <th>Credits</th>
                <th>Status</th>
                <th class="text-center">Edit</th>
                <th class="text-center">Delete</th>
            </tr>
        </thead>

        <tbody>
            @foreach (var course in Model)
            {
                <tr>
                    <td>@course.CourseName</td>
                    <td>@course.Department</td>
                    <td>@course.Duration</td>
                    <td>@course.TotalCredits</td>
                    <td>
                        @if (course.IsActive)
                        {
                            <span class="badge bg-success">Active</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary">Inactive</span>
                        }
                    </td>

                    <td class="text-center">
                        <a asp-action="Edit" asp-route-id="@course.CourseId"
                           class="text-primary">
                            <i class="bi bi-pencil-square"></i>
                        </a>
                    </td>

                    <td class="text-center">
                        <button type="button"
                                class="btn btn-link text-danger fs-5 p-0"
                                data-bs-toggle="modal"
                                data-bs-target="#deleteCourseModal"
                                data-id="@course.CourseId"
                                data-name="@course.CourseName">
                            <i class="bi bi-trash-fill"></i>
                        </button>

                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<!-- Delete Course Confirmation Modal -->
<div class="modal fade" id="deleteCourseModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">

            <div class="modal-header text-white" style="background:#0f766e;">
                <h5 class="modal-title">Confirm Delete</h5>
                <button type="button"
                        class="btn-close btn-close-white"
                        data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body text-center">
                <i class="bi bi-exclamation-triangle-fill text-danger fs-1 mb-3"></i>

                <p class="fs-5 mb-1">Delete this course?</p>
                <strong id="courseName"></strong>

                <p class="text-muted mt-2">
                    This action cannot be undone.
                </p>
            </div>

            <div class="modal-footer justify-content-center">
                <button class="btn btn-outline-secondary px-4"
                        data-bs-dismiss="modal">
                    Cancel
                </button>

                <form id="deleteCourseForm" method="post">
                    <button type="submit" class="btn btn-danger px-4">
                        Yes, Delete
                    </button>
                </form>
            </div>

        </div>
    </div>
</div>
<script>
    const deleteCourseModal = document.getElementById('deleteCourseModal');

    deleteCourseModal.addEventListener('show.bs.modal', function (event) {
        const button = event.relatedTarget;

        const courseId = button.getAttribute('data-id');
        const courseName = button.getAttribute('data-name');

        document.getElementById('courseName').innerText = courseName;

        const form = document.getElementById('deleteCourseForm');
        form.action = `/Courses/Delete/${courseId}`;
    });
</script>

